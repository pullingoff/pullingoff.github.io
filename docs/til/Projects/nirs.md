# 국가정보자원관리원 종합관제 보안시스템

## 프로젝트 소개

[🗺 (클릭!) 국가정보자원관리원 인공지능기반 서비스중심 종합관제 보안시스템 모니터링맵 (nMAPS)](https://www.nirs.go.kr/subN02/sub02_102.jsp)

: 국가정보자원관리원은 우리나라의 경찰청, 국정원을 제외한 모든 공공기관의 정보자원(웹 서비스, 네트워크, 물리 장비 등)을 관리하는 곳입니다. 위 프로젝트는 이 정보자원, 네트워크 호스트간의 관계를 3D로 시각화해 관제합니다.

## 나의 역할

위 프로젝트에서 저는 **노드/엣지 모델 목록을 기반으로 `Neo4j` 쿼리를 구성하고 실행시켜 GDB를 구축**하는 부분을 도맡아 개발했습니다. 또 이 GDB 모델들을 관리하는 파이썬 장고 백엔드 파트도 구현하였습니다.

## 기술

우리 프로젝트에서 **제가 직접 사용한 기술 스택**입니다.

- Python, Neo4j, FastAPI, Django, Docker, Shell script
- Vanilla JS, TypeScript, REST API, go.js, SCSS

### GDB 모델링

- 설계 문서를 바탕으로 약 60개의 노드, 100개의 엣지 모델링
- Physical, Network, Host, Service 등 여러 레이어의 모델을 다룸
- 예시: `Host` 자원 하나가 추가되면 `Host`, `물리 장비`, `OS 커널`, 논리-물리를 중재하는 `인터페이스` 노드가 생겨야함. 또 이 노드들이 각각의 관계를 가지도록 함

### GDB 쿼리 문자열 생성 및 데이터 삽입

1. 서버 1에서 가져온 모델 타입(node/edge)과 속성에 맞게 쿼리를 생성
   - 속성명이 겹치는 경우, 쿼리 형태가 달라져야하는 경우 등 상황에 맞게 문자열 생성
2. GDB 삽입을 위해 조회 및 가공된 데이터 파일을 CSV로 저장
   - 매일 새로운 데이터가 생기고 데이터 모델별로 다른 쿼리를 가지기 때문에 RDB에 저장하는 대신 CSV 파일로 저장
3. 서버1의 파이썬 코드에서 Neo4j 매니저를 서버2의 계정으로 로그인, 서버2가 서버1로 `FastAPI`를 통해 파일 요청을 보냄
4. 서버1에서 데이터 파일을 응답 보냄
5. 서버2에서 받은 파일과 GDB 쿼리로 Neo4j에 데이터를 삽입
   - 속도 향상을 위해 파이썬 `multiprocessing` 적용

위 과정을 주기적으로 실행하는 Docker 배치 잡 구현하였음

### 관리 페이지, 네트워크 구조 2D 시각화

- `Django` 노드, 엣지 모델링 및 GDB 앱 구현
- `Go.js`로 관리자 조회용 2D 웹 페이지 구현

