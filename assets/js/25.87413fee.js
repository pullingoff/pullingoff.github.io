(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{473:function(t,s,a){t.exports=a.p+"assets/img/403err.0a25ecba.png"},572:function(t,s,a){"use strict";a.r(s);var n=a(59),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"리액트-unsplash-api-사용법-rest-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#리액트-unsplash-api-사용법-rest-api"}},[t._v("#")]),t._v(" 리액트 Unsplash API 사용법 (REST API)")]),t._v(" "),n("h2",{attrs:{id:"unsplash-api-사용하기"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#unsplash-api-사용하기"}},[t._v("#")]),t._v(" Unsplash API 사용하기")]),t._v(" "),n("p",[t._v("얼마전 Unsplash API를 사용해서 무한 스크롤, 검색이 가능한 "),n("a",{attrs:{href:"https://pullingoff.github.io/gallery/",target:"_blank",rel:"noopener noreferrer"}},[t._v("갤러리"),n("OutboundLink")],1),t._v("를 개발해보았다. 완성된 "),n("a",{attrs:{href:"https://github.com/pullingoff/gallery",target:"_blank",rel:"noopener noreferrer"}},[t._v("소스코드는 이 저장소에서 확인"),n("OutboundLink")],1),t._v(")할 수 있다.")]),t._v(" "),n("p",[n("a",{attrs:{href:"unsplash.com/documentation"}},[t._v("Unsplash API 공식문서")]),t._v("에 따라 가입하고 앱을 생성하면 "),n("code",[t._v("Access Key")]),t._v("를 발급받게 된다. 그 키는 보안이 중요하므로 "),n("code",[t._v(".env")]),t._v(" 파일에 로컬 변수로 넣어주고, "),n("code",[t._v(".env")]),t._v("파일을 "),n("code",[t._v(".gitignore")]),t._v("에 등록해 유출되지 않도록 한다.")]),t._v(" "),n("p",[t._v("그 후, API 공식문서에 따라 Authorization header에 액세스키를 넣고, 요청을 보내면 된다.")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Authorization")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Client-ID ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ACCESS_KEY")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 생략")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" imgData "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" axios"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.unsplash.com/search/photos'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" headers "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[t._v("이렇게 하면 Unsplash API가 사진 목록을 정상적으로 보내준다. 공식 문서가 친절하고 알아보기 쉽게 적혀있어서 어렵지 않았음!")]),t._v(" "),n("h2",{attrs:{id:"_403-에러-핸들링"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_403-에러-핸들링"}},[t._v("#")]),t._v(" 403 에러 핸들링")]),t._v(" "),n("p",[n("img",{attrs:{src:a(473),alt:"403 error"}})]),t._v(" "),n("p",[t._v("근데 하다보면... 403 에러가 뜬다. "),n("code",[t._v("response.data")]),t._v("를 보면 "),n("strong",[t._v("Rate Limit Exceeded")]),t._v(" 라고 적혀있다. API를 무료로 이용하는 Demo 버전의 경우 시간당 50회만 요청이 가능해서 제한된 횟수를 넘어서 에러를 보낸다.")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 403 Error Response")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Rate Limit Exceeded"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\nx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ratelimit"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("limit"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50"')]),t._v("\nx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ratelimit"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("remaining"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("그럼 이런 상황엔 어떻게 처리를 해야할까? 지금은 그냥 "),n("code",[t._v("console.log(error)")]),t._v("만 해둔 상태다.")])])}),[],!1,null,null,null);s.default=e.exports}}]);